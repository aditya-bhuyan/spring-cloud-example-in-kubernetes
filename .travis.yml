sudo: enabled
language: java
jdk:
  - openjdk8

services:
  - docker
  
branches:
  only:
    - develop-gcr

cache:
  directories:
  - '$HOME/.m2/repository'
env:

before_install:
  - curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/v1.7.0/bin/linux/amd64/kubectl && chmod +x kubectl && sudo mv kubectl /usr/local/bin/
  - curl -Lo skaffold https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64 && chmod +x skaffold && sudo mv skaffold /usr/local/bin/

script:
  - mkdir ${HOME}/.kube
  - cp ./k8s/config.yml ${HOME}/.kube/config
  - cd ${HOME}/.kube
  - kubectl config use-context gke_nifty-inn-274523_asia-east2-a_cluster-1
  - cd ${HOME}/build/atropos0116
  - ls
    #  - cd
    #- skaffold dev -p dev

